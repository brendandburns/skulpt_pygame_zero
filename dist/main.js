(function () {var d={};var b={},k=b&&b.__spreadArray||function(e,n){for(var r=0,t=n.length,o=e.length;r<t;r++,o++)e[o]=n[r];return e};function h(e,n){return window[n]?Promise.resolve(window[n]):new Promise(function(r,t){var o=document.createElement("script");o.onload=function(){r(n&&window.varName)},o.onerror=function(e){o.onload=null,o.onerror=null,document.body.removeChild(o),t(e)},o.src=e,o.async=!0,document.body.appendChild(o)})}b.loadScript=h;var l=function(e){e.App&&(e.App.destroy({removeView:!0}),window.PIXI.loader.destroy(),e.App=void 0,e.timerMap.forEach(function(e,n){window.clearInterval(e),window.clearTimeout(e)}),e.timerMap.clear(),e.soundMap={},e.music.pause(),e.music=null,e.music=new Audio,Object.keys(e.windowListener).map(function(n){var r=n.replace("Listener","");window.removeEventListener(r,e.windowListener[n])}))};b.resetPygameZero=l;var f={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"};b.ColorNameMap=f;var m=function(e){Math.round(e.view.width/2),Math.round(e.view.height/2);var n={transX:function(e,n){return void 0===n&&(n=!1),e},transY:function(e,n){return void 0===n&&(n=!1),e},transPos:function(e,r){return void 0===r&&(r=!1),e?[n.transX(e[0],r),n.transY(e[1],r)]:e},transColor:function(e){return Array.isArray(e)?window.PIXI.utils.rgb2hex(e):e.match("#")?window.PIXI.utils.string2hex(e):f[e]?window.PIXI.utils.string2hex(f[e]):16777215}};return n};function p(e,n){Array.isArray(n)&&(n.x=n[0],n.y=n[1],n.width=0,n.height=0),e.centerX=e.x+e.width/2,e.centerY=e.y+e.height/2,n.centerX=n.x+n.width/2,n.centerY=n.y+n.height/2,e.halfWidth=e.width/2,e.halfHeight=e.height/2,n.halfWidth=n.width/2,n.halfHeight=n.height/2;var r=e.centerX-n.centerX,t=e.centerY-n.centerY,o=e.halfWidth+n.halfWidth,a=e.halfHeight+n.halfHeight;return Math.abs(r)<o&&Math.abs(t)<a}b.translateTools=m,b.hitTestRectangle=p;var g={};function q(e){function n(e){var n;return Array.isArray(e)&&(n=k([],e),e=n[0]),new Promise(function(r,t){window.PIXI.utils.TextureCache[e]?r(window.PIXI.utils.TextureCache[e]):window.PIXI.loader.add(n||e).load(function(){var n=window.PIXI.loader.resources[e].texture;r(n)})})}return /\.json$/.test(e)?g[e]?n(g[e]):fetch(e).then(function(e){return e.json()}).then(function(r){var t=e.replace("index.json",""),o=r.map(function(e){return t+e});return g[e]=o,n(o)}):n(e)}b.textureRecources=q;var c=window.Sk,s=function(e){return c.misceval.callsimOrSuspend(c.builtins.property,new c.builtin.func(e),new c.builtin.func(function(){}))};function u(e,n){var r=function(r){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];n||(t=new c.builtins.tuple(t));var a=new c.builtin.dict(r);return e(t,a)};return r.co_kwargs=!0,r}b.defineGetter=s,b.genkwaFunc=u;var v=function(e,n){return c.misceval.callsimOrSuspend(c.builtins.property,new c.builtin.func(function(r){return"function"==typeof e?e(r):c.ffi.remapToPy(r[e][n])}),new c.builtin.func(function(r,t){"function"==typeof n?n(r,t):r[e][n]=t.v}))};b.defineProperty=v;var w=window.Sk,i={"./pgzrun/__init__.js":"https://cdn.jsdelivr.net/gh/lipten/skulpt-pygame-zero/dist/pygame-zero.js"},j={usePyGameZero:function(e){var n=this;return function(t){return n.matchModelName(t)?n.load(t):e.call(this,t)}},load:function(e){return w.misceval.promiseToSuspension(new Promise(function(n,t){h("https://cdn.bootcdn.net/ajax/libs/pixi.js/5.3.4/pixi.min.js","PIXI").then(function(){fetch(i[e]).then(function(e){var t=e.text();n(t)})})}))},matchModelName:function(e){return Object.keys(i).includes(e)},setContainer:function(e){this.container=e},reset:function(){this._handleReset()},_handleReset:function(){},_onRunning:function(e){this.app=e},_moduleCache:{App:null,timerMap:new Map,soundMap:{},music:new Audio,windowListener:{}}};d.PyGameZero=j,window.PyGameZero=j;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=d}else if(typeof define==="function"&&define.amd){define(function(){return d})}})();